---
layout: post
title: "R 的向量"
date: 2017-08-21 00:12:50+08:00
description: R的向量及相关的操作
share: true
tags: math R
---

关于“向量”，我已经在文章 [R基础](./r-basics) 中做了描述，这里再做些补充。

在 R 中，一般可以使用“数”的地方常常也可以使用“向量”，可以认为“向量”就是一种新的“数”，
把“向量”看成是“数”，这就是用好 R 的一个秘诀。

一个向量是有限多个同类元素(数)按顺序排成的，关键点是元素的类型、元素的个数和元素的顺序。
向量中的任何一个元素只是这个向量的一个分量。
正因为拥有着一串的数，向量具有着比单个数强大得多的描述事物的能力。

元素的类型决定了可以用在这个向量上的操作，
可以应用在一个向量的某个元素上的操作都可以应用到整个向量上。
如果需要把一个向量应用某种需要其它类型的操作，
在 R 中可能会使用隐含的类型转换机制先对向量的元素类型进行转换，
也有可能需要使用者明确地对向量进行类型转换后再来应用这一操作。

可以构造一个没有任何元素的向量，然后再给它添加元素，如下例所示：

    > x <- vector()
    > x
    logical(0)
    > mode(x)
    [1] "logical"
    > length(x)
    [1] 0
    > x[1] <- 1
    > mode(x)
    [1] "numeric"
    > x
    [1] 1
    > x[10] <- 10
    > x
     [1]  1 NA NA NA NA NA NA NA NA 10
    >

也可以一开始就明确向量的元素类型来创建一个空的向量，然后再添加元素：

    > y <- vector(mode='numeric')
    > y
    numeric(0)
    > length(y)
    [1] 0
    > class(x)
    [1] "numeric"
    > y[1] <- TRUE
    > y
    [1] 1
    > mode(y)
    [1] "numeric"
    > y
    [1] 1
    >

通过 length() 来获得向量的元素个数，也即向量的长度。即使向量中如果有位置为Nan，它也被看是成同类的元素，
所以上述的向量 x 的长度为 10。

可以使用 is.vector() 来判断一个对象是否为向量，
可以使用 as.vector() 来把一个对象转换成向量。

可以使用 c() 来按枚举的方法构造向量，
可以使用 a:b、seq()、rep()等方法来构造元素符合序列、重复等规律的向量，
可以使用 scan() 从文件或者标准输入中依次添加元素的方式来构造向量，
可以通过对一个已知向量进行元素筛选、重新排列等方式来构造新向量，
可以通过已知向量之间的运算来构造新向量，
可以对矩阵或数阵等多维数据进行元素的选取或某种降维操作等来获得新的向量。

注意两个向量之间的比较：

    > x <- 1:10
    > y <- 11:20 - 10
    > x
     [1]  1  2  3  4  5  6  7  8  9 10
    > y
     [1]  1  2  3  4  5  6  7  8  9 10
    > x == y
     [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
    > all.equal(x, y)
    [1] TRUE
    > identical(x, y)
    [1] FALSE
    >

